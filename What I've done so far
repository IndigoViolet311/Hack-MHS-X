import csv

def businessowner():
    businessname = input("What is the name of your business? ")
    location = input("What state is your business located in? ")
    product = input("What does your business sell? ")
    business = [businessname, location, product]
    with open("businesses.txt", "a") as f:
        f.write(str(business))
    print("Awesome! Thanks for registering " + business[0] + " with us!")

def customer():
    searchterm = 'none'
    while (searchterm != 'product' and searchterm != 'type') and searchterm != 'location':
        searchterm = input("Would you like to search by product type or location? ")
        searchterm = searchterm.lower()
        if (searchterm == 'product') or (searchterm == 'type'):
            print(" ")
            productsearch = input("What product are you looking for? ")
            fhand = open('businesses.txt')
            for line in fhand:
                line = line.rstrip()
                if line.find(productsearch) == -1:
                    continue
                print(line)
            fhand.close()
        elif searchterm == 'location':
            print(" ")
            locationsearch = input("What state are you looking in?")
        else:
            print(" ")
            print("Sorry, didn't get that! Please enter 'product', 'type', or 'location',")
            print(" ")

def admin():
    adminpurpose = input("Enter 'view' if you want to view all businesses or change the list. Enter 'return' if you are not an administrator.")

def adminlogin():
    correctpw = "hackmhs2025"
    loginattempts = 0
    while loginattempts < 3:
        inputpw = str(input("What is the admin password?"))
        if inputpw == correctpw:
            print("Welcome, administrator.")
            admin()
            return
        else:
            loginattempts += 1
            if loginattempts < 3:
                inputpw = input(f"Incorrect password. You have {3 - loginattempts} attempts.")
    print("Too many incorrect attempts. You are not an admin.")
    user = input("Are you a business owner or a customer? Please enter 'b' or 'c': ")
    
user = 'none'
while (user.lower() != 'b') and (user.lower() != 'c') and (user.lower() != 'a'):
    user = input("Are you an admin, business owner, or a customer? Please enter 'a' if you are an admin, 'b' if you are a business owner, or 'c' if you are a customer. ")
    if user.lower() == 'b':
        print(" ")
        businessowner()
    elif user.lower() == 'c':
        print(" ")
        customer()
    elif user.lower() == 'a':
        print(" ")
        adminlogin()
    else:
        print("Sorry, I didn't get that.")
        print(" ")
